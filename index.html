<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate-key="panel_title">Satıcı Paneli</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
            color: #d1d5db;
        }

        .card {
            background-color: #1f2937;
            border: 1px solid #374151;
            border-radius: 0.75rem;
        }

        .btn-primary {
            background-color: #4f46e5;
            color: white;
            font-weight: 600;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
            transition: background-color 0.2s;
        }

        .btn-primary:hover {
            background-color: #4338ca;
        }
        
        .btn-secondary {
            background-color: #374151;
            color: white;
            font-weight: 600;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
            transition: background-color 0.2s;
        }

        .btn-secondary:hover {
            background-color: #4b5563;
        }

        .nav-item {
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
            cursor: pointer;
        }

        .nav-item.active {
            background-color: #4f46e5;
            color: white;
        }

        .nav-item:not(.active):hover {
            background-color: #374151;
        }

        .form-input {
            background-color: #374151;
            border: 1px solid #4b5563;
            color: #d1d5db;
            border-radius: 0.5rem;
            padding: 0.75rem;
            width: 100%;
        }
        .form-input:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 2px #4f46e560;
        }
        
        /* Markdown Stilleri */
        .markdown-content h3 {
            font-size: 1.25rem;
            font-weight: 700;
            color: #a5b4fc;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            border-bottom: 1px solid #374151;
            padding-bottom: 0.5rem;
        }
        .markdown-content ul {
            list-style-type: disc;
            padding-left: 1.5rem;
            margin-bottom: 1rem;
        }
         .markdown-content li {
            margin-bottom: 0.5rem;
        }
        .markdown-content p {
             margin-bottom: 1rem;
             line-height: 1.6;
        }
    </style>
</head>

<body class="flex h-screen overflow-hidden">
    <!-- Kenar Çubuğu (Sidebar) -->
    <aside id="sidebar"
        class="w-64 bg-gray-900 text-gray-300 flex-shrink-0 transform -translate-x-full md:relative md:translate-x-0 transition-transform duration-200 ease-in-out z-30">
        <div class="p-6 text-center border-b border-gray-700">
            <h1 class="text-2xl font-bold text-white"><i class="fas fa-store text-indigo-400"></i> <span data-translate-key="panel_title">Satıcı Paneli</span></h1>
        </div>
        <nav class="p-4 space-y-2">
            <a class="nav-item flex items-center gap-3 active" data-page="dashboard"><i class="fas fa-tachometer-alt fa-fw"></i><span data-translate-key="nav_dashboard">Anasayfa</span></a>
            <a class="nav-item flex items-center gap-3" data-page="store-analyzer"><i class="fas fa-search-dollar fa-fw"></i><span data-translate-key="nav_store_analyzer">Mağaza Analiz</span></a>
            <a class="nav-item flex items-center gap-3" data-page="listing-manager"><i class="fas fa-tasks fa-fw"></i><span data-translate-key="nav_listing_manager">Ürün Yöneticisi</span></a>
            <a class="nav-item flex items-center gap-3" data-page="ai-generator"><i class="fas fa-magic fa-fw"></i><span data-translate-key="nav_ai_generator">AI İçerik Üretici</span></a>
            <a class="nav-item flex items-center gap-3" data-page="photo-editor"><i class="fas fa-image fa-fw"></i><span data-translate-key="nav_photo_editor">Fotoğraf Editörü</span></a>
            <a class="nav-item flex items-center gap-3" data-page="pricing-calculator"><i class="fas fa-calculator fa-fw"></i><span data-translate-key="nav_pricing_calculator">Fiyat Hesaplayıcı</span></a>
            <a class="nav-item flex items-center gap-3" data-page="platform-connections"><i class="fas fa-plug fa-fw"></i><span data-translate-key="nav_platform_connections">Mağaza Bağlantıları</span></a>
        </nav>
        <div class="p-4 absolute bottom-0 w-full">
             <div class="card p-4 text-center bg-indigo-900/50 border-indigo-700">
                <p class="text-sm text-indigo-200 mb-2" data-translate-key="pro_promo_text">Verimliliğinizi Artırın</p>
                <button class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg text-sm" data-translate-key="pro_promo_button">PRO'ya Yükselt</button>
            </div>
        </div>
    </aside>

    <!-- Ana İçerik -->
    <main class="flex-1 flex flex-col overflow-y-auto">
        <!-- Üst Bar -->
        <header class="flex items-center justify-between p-4 bg-gray-900 border-b border-gray-800">
            <button id="menu-toggle" class="md:hidden text-2xl text-gray-400">
                <i class="fas fa-bars"></i>
            </button>
            <div class="text-lg font-semibold text-white"></div> <!-- Sayfa başlığı buraya gelebilir -->
            <div class="relative">
                 <button id="settings-btn" class="text-xl text-gray-400 hover:text-white transition">
                    <i class="fas fa-cog"></i>
                </button>
                <div id="settings-dropdown" class="absolute right-0 mt-2 w-48 card hidden z-50">
                    <div class="p-2">
                        <label for="language-select" class="block text-sm font-medium text-gray-400 px-2 pb-1" data-translate-key="settings_language">Dil</label>
                        <select id="language-select" class="form-input text-sm w-full">
                            <option value="tr">Türkçe</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                     <div class="p-2 border-t border-gray-700">
                         <a href="#" id="api-key-link" class="block w-full text-left px-2 py-1.5 text-sm text-gray-300 hover:bg-gray-700 rounded" data-translate-key="settings_api_key">API Anahtarı</a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Sayfa İçeriği -->
        <div id="content" class="p-4 md:p-8 space-y-8">
            <!-- Her sayfa içeriği buraya dinamik olarak yüklenecek -->
        </div>
    </main>
    
    <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden md:hidden"></div>


    <!-- Modallar -->
    <div id="api-key-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50 p-4">
        <div class="card p-8 max-w-md w-full">
            <h2 class="text-2xl font-bold text-white mb-2" data-translate-key="api_modal_title">Gemini API Anahtarını Girin</h2>
            <p class="text-gray-400 mb-6" data-translate-key="api_modal_subtitle">Üretken yapay zeka özellikleri için API anahtarınız gereklidir.</p>
            <input type="password" id="api-key-input" class="form-input mb-4" placeholder="API Anahtarınız...">
            <div class="flex justify-end gap-4">
                <button id="cancel-api-key-btn" class="btn-secondary" data-translate-key="button_cancel">İptal</button>
                <button id="save-api-key-btn" class="btn-primary" data-translate-key="button_save">Kaydet</button>
            </div>
            <p class="text-sm text-gray-500 mt-6 text-center">
                <span data-translate-key="api_modal_get_key_text">API Anahtarınız yok mu?</span>
                <a href="https://aistudio.google.com/app/apikey" target="_blank" class="text-indigo-400 hover:underline" data-translate-key="api_modal_get_key_link">Buradan alın.</a>
            </p>
        </div>
    </div>
    
    <div id="error-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50 p-4">
        <div class="card p-8 max-w-md w-full text-center">
            <i class="fas fa-exclamation-circle text-4xl text-yellow-400 mb-4"></i>
            <h2 class="text-xl font-bold text-white" data-translate-key="error_modal_title">Bir Hata Oluştu</h2>
            <p id="error-modal-message" class="text-gray-400 mb-6"></p>
            <button id="close-error-modal-btn" class="btn-primary w-1/2 mx-auto" data-translate-key="button_close">Kapat</button>
        </div>
    </div>

    <div id="shopify-url-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50 p-4">
        <div class="card p-8 max-w-md w-full">
            <i class="fab fa-shopify text-5xl text-green-500 mb-4 mx-auto text-center block"></i>
            <h2 class="text-2xl font-bold text-white mb-2 text-center" data-translate-key="shopify_modal_url_title">Shopify Mağaza Adresinizi Girin</h2>
            <p class="text-gray-400 mb-6 text-center" data-translate-key="shopify_modal_url_subtitle">Bağlanmak için '.myshopify.com' adresinizi girin.</p>
            <input type="text" id="shopify-url-input" class="form-input mb-4" placeholder="ornek-magaza.myshopify.com">
             <ul class="text-sm text-gray-400 space-y-2 mb-6">
                <li class="flex items-center gap-2"><i class="fas fa-check-circle text-green-500"></i> <span data-translate-key="shopify_modal_perm1">Ürünlerinizi okuma ve yazma</span></li>
            </ul>
            <div class="flex justify-end gap-4">
                <button id="cancel-shopify-url-btn" class="btn-secondary" data-translate-key="button_cancel">İptal</button>
                <button id="continue-shopify-url-btn" class="btn-primary" data-translate-key="button_continue">Devam Et</button>
            </div>
        </div>
    </div>

    <div id="delete-confirm-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50 p-4">
        <div class="card p-8 max-w-md w-full text-center">
            <i class="fas fa-trash-alt text-4xl text-red-500 mb-4"></i>
            <h2 class="text-xl font-bold text-white" data-translate-key="delete_modal_title">Emin misiniz?</h2>
            <p class="text-gray-400 mb-6" data-translate-key="delete_modal_subtitle">Bu içerik kalıcı olarak silinecektir. Bu işlem geri alınamaz.</p>
            <div class="flex justify-center gap-4">
                <button id="cancel-delete-btn" class="btn-secondary" data-translate-key="button_cancel">İptal</button>
                <button id="confirm-delete-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg" data-translate-key="button_confirm_delete">Evet, Sil</button>
            </div>
        </div>
    </div>
    
    <script>
        // --- ÇEVİRİ VE DİL AYARLARI ---
        const translations = {
            tr: {
                panel_title: "Satıcı Paneli",
                nav_dashboard: "Anasayfa",
                nav_store_analyzer: "Mağaza Analiz",
                nav_listing_manager: "Ürün Yöneticisi",
                nav_ai_generator: "AI İçerik Üretici",
                nav_photo_editor: "Fotoğraf Editörü",
                nav_pricing_calculator: "Fiyat Hesaplayıcı",
                nav_platform_connections: "Mağaza Bağlantıları",
                nav_settings: "Ayarlar",
                settings_language: "Dil",
                settings_api_key: "API Anahtarı",
                settings_enter_api_key: "API Anahtarı Girin",
                api_modal_title: "Gemini API Anahtarını Girin",
                api_modal_subtitle: "Üretken yapay zeka özellikleri için API anahtarınız gereklidir.",
                api_modal_get_key_text: "API Anahtarınız yok mu?",
                api_modal_get_key_link: "Buradan alın.",
                pro_promo_text: "Verimliliğinizi Artırın",
                pro_promo_button: "PRO'ya Yükselt",
                dashboard_welcome_title: "Satıcı Paneline Hoş Geldiniz!",
                dashboard_welcome_subtitle: "İş akışınızı hızlandıracak araçlara buradan hızlıca erişebilirsiniz.",
                dashboard_ai_desc: "Yapay zeka ile saniyeler içinde ürün içeriği oluşturun.",
                dashboard_photo_desc: "Ürün fotoğraflarınızı kolayca düzenleyin, filigran ekleyin.",
                dashboard_pricing_desc: "Maliyetlerinizi girerek doğru satış fiyatını hesaplayın.",
                dashboard_connections_desc: "Etsy gibi pazar yerlerindeki mağazalarınızı bağlayın.",
                analyzer_title: "Mağaza Analiz Aracı",
                analyzer_subtitle: "Mağaza URL'nizi girin, yapay zeka güçlü ve zayıf yönlerinizi analiz etsin.",
                analyzer_placeholder: "https://www.etsy.com/shop/magazaniz...",
                analyzer_button: "Mağazayı Analiz Et",
                analyzer_loading: "AI mağazanızı inceliyor...",
                analyzer_report_title: "Analiz Raporu",
                analyzer_overall: "Genel Değerlendirme",
                analyzer_seo: "SEO ve Anahtar Kelimeler",
                analyzer_visuals: "Görsel Analizi",
                analyzer_recommendations: "Eyleme Geçirilebilir Öneriler",
                analyzer_save_report: "Analizi Kaydet",
                analyzer_copy_report: "Raporu Kopyala",
                analyzer_saved_analyses: "Kaydedilmiş Analizler",
                analyzer_no_saved_analyses: "Henüz kaydedilmiş analiz yok.",
                button_view: "Görüntüle",
                button_share: "Paylaş",
                listing_manager_title: "Ürün Yöneticisi",
                listing_manager_subtitle: "Ürün bilgilerinizi burada toplayın ve mağazanıza yükleyin.",
                listing_manager_select_content: "Kaydedilmiş İçerik Seç",
                listing_manager_no_content_selected: "İçerik seçilmedi",
                listing_manager_price: "Fiyat ($)",
                listing_manager_stock: "Stok Adedi",
                listing_manager_images: "Ürün Görselleri",
                listing_manager_upload_to: "Mağazaya Yükle",
                listing_manager_upload_button: "Mağazaya Yükle",
                listing_manager_uploading: "Yükleniyor...",
                listing_manager_uploaded: "Başarıyla Yüklendi!",
                ai_title: "Yapay Zeka Destekli İçerik Üretici",
                ai_subtitle: "Ürününüzle ilgili anahtar kelimeleri girin, sizin için başlık, açıklama ve etiketler üretelim.",
                ai_keywords_label: "Anahtar Kelimeler",
                ai_keywords_placeholder_desc: "ör: el yapımı, gümüş kolye, yonca tasarım, anneye hediye",
                ai_keywords_placeholder_input: "Ürününüzü anlatan kelimeleri virgülle ayırarak girin...",
                ai_button_generate: "İçerik Oluştur",
                ai_loader_text: "AI sizin için yazıyor...",
                ai_translating_text: "Çevriliyor...",
                ai_generated_title_label: "Başlık",
                ai_generated_desc_label: "Açıklama",
                ai_generated_tags_label: "Etiketler",
                ai_title_not_found: "Başlık bulunamadı",
                ai_description_not_found: "Açıklama bulunamadı",
                ai_tags_not_found: "Etiketler bulunamadı",
                ai_button_save: "Bu İçeriği Kaydet",
                ai_button_translate: "İngilizce'ye Çevir",
                ai_saved_content_title: "Kaydedilmiş İçerikler",
                ai_no_saved_content: "Henüz kaydedilmiş içerik yok.",
                ai_error_keywords_missing: "Lütfen içerik üretmek için en az bir anahtar kelime girin.",
                button_save: "Kaydet",
                button_copy: "Kopyala",
                button_copied: "Kopyalandı!",
                button_delete: "Sil",
                button_error: "Hata",
                photo_editor_title: "Fotoğraf Editörü",
                photo_editor_subtitle: "Ürün fotoğraflarınızı yükleyin, düzenleyin ve indirin.",
                photo_editor_upload_btn: "Fotoğraf Yükle",
                photo_editor_brightness: "Parlaklık",
                photo_editor_contrast: "Kontrast",
                photo_editor_saturation: "Doygunluk",
                photo_editor_watermark: "Filigran Metni",
                photo_editor_watermark_placeholder: "Mağaza Adınız",
                photo_editor_apply_watermark: "Filigran Uygula",
                photo_editor_reset: "Sıfırla",
                photo_editor_download: "İndir",
                photo_editor_placeholder: "Düzenlemeye başlamak için bir fotoğraf yükleyin.",
                pricing_title: "Akıllı Fiyat Hesaplayıcı",
                pricing_subtitle: "Maliyetlerinizi girerek kârlı ve rekabetçi satış fiyatınızı anında hesaplayın.",
                pricing_cost: "Ürün Maliyeti ($)",
                pricing_margin: "İstenen Kâr Marjı (%)",
                pricing_shipping: "Kargo Ücreti ($)",
                pricing_fee: "Platform Komisyonu (%)",
                pricing_button_calculate: "Hesapla",
                pricing_result_title: "Önerilen Satış Fiyatı:",
                pricing_result_profit_text: "Bu fiyattaki net kârınız:",
                connections_title: "Mağaza Bağlantıları",
                connections_subtitle: "Satış yaptığınız platformlardaki mağazalarınızı buraya bağlayarak yönetmeye başlayın.",
                connections_etsy_desc: "El yapımı ve vintage ürünler için bir pazar yeri.",
                connections_shopify_desc: "Kendi e-ticaret sitenizi oluşturun ve yönetin.",
                connections_amazon_desc: "Amazon'un el yapımı ürünlere özel bölümü.",
                button_connect: "Bağlan",
                button_continue: "Devam Et",
                button_connected: "Bağlandı",
                button_soon: "Yakında",
                shopify_modal_url_title: "Shopify Mağaza Adresinizi Girin",
                shopify_modal_url_subtitle: "Bağlanmak için '.myshopify.com' adresinizi girin.",
                shopify_modal_perm1: "Ürünlerinizi okuma ve yazma",
                delete_modal_title: "Emin misiniz?",
                delete_modal_subtitle: "Bu içerik kalıcı olarak silinecektir. Bu işlem geri alınamaz.",
                button_cancel: "İptal",
                button_confirm_delete: "Evet, Sil",
                button_close: "Kapat",
                error_modal_title: "Bir Hata Oluştu",
                api_error_generic: "API'ye bağlanılamadı. Lütfen internet bağlantınızı, API anahtarınızı kontrol edin ve tekrar deneyin.",
                upload_error_generic: "Yükleme başarısız oldu. Lütfen internet bağlantınızı kontrol edin ve tekrar deneyin.",
                upload_error_simulation: "Yükleme simülasyonu başarısız oldu. Bu özellik gerçek bir arka uç (backend) bağlantısı gerektirir. Bu bir ön yüz prototipidir.",
                lang_name: "Türkçe",
                ai_prompt: `Bir e-ticaret metin yazarı olarak davran. Aşağıdaki anahtar kelimeleri kullanarak SEO uyumlu, satış odaklı ve yaratıcı ürün içerikleri oluştur. Anahtar Kelimeler: "{keywords}"\n\nÇıktıyı mutlaka şu formatta ver:\nBaşlık: [Oluşturulan Başlık]\nAçıklama: [Oluşturulan Açıklama]\nEtiketler: [Oluşturulan Etiketler]`,
                ai_translate_prompt: `Aşağıdaki e-ticaret içeriğini profesyonel ve akıcı bir şekilde İngilizce'ye çevir. Pazarlama dilini koru. Çıktıyı mutlaka şu formatta ver:\nBaşlık: [Çevrilmiş Başlık]\nAçıklama: [Çevrilmiş Açıklama]\nEtiketler: [Çevrilmiş Etiketler]\n\n---İÇERİK---\nBaşlık: {title}\nAçıklama: {description}\nEtiketler: {tags}`,
                ai_analyzer_prompt: `Sen bir e-ticaret danışmanı uzmanısın. Görevin, verilen URL'deki online mağazayı analiz etmek ve satıcıya mağazasını geliştirmesi için eyleme geçirilebilir öneriler sunmak. Analizini şu başlıklara ayırarak Markdown formatında sun:\n\n### Genel Değerlendirme\n(Mağazanın ilk izlenimi, marka kimliği, güvenilirlik ve genel profesyonelliği hakkında kısa bir özet.)\n\n### SEO ve Anahtar Kelimeler\n(Ürün başlıklarının, açıklamalarının ve etiketlerinin (varsa) arama motorları için ne kadar optimize edildiğini değerlendir. Güçlü ve zayıf yönleri belirt.)\n\n### Görsel Analizi\n(Ürün fotoğraflarının kalitesini, tutarlılığını, aydınlatmasını ve müşteriyi ne kadar cezbettiğini analiz et.)\n\n### Eyleme Geçirilebilir Öneriler\n(Yukarıdaki analizlere dayanarak, satıcının satışlarını artırmak için atabileceği 3-5 adet somut, öncelikli ve uygulanabilir adımı madde madde listele.)\n\nAnaliz edilecek mağaza: `
            },
            en: {
                panel_title: "Seller Panel",
                nav_dashboard: "Dashboard",
                nav_store_analyzer: "Store Analyzer",
                nav_listing_manager: "Listing Manager",
                nav_ai_generator: "AI Content Generator",
                nav_photo_editor: "Photo Editor",
                nav_pricing_calculator: "Pricing Calculator",
                nav_platform_connections: "Store Connections",
                nav_settings: "Settings",
                settings_language: "Language",
                settings_api_key: "API Key",
                settings_enter_api_key: "Enter API Key",
                api_modal_title: "Enter Gemini API Key",
                api_modal_subtitle: "Your API key is required to use generative AI features.",
                api_modal_get_key_text: "Don't have an API Key?",
                api_modal_get_key_link: "Get one here.",
                pro_promo_text: "Increase Your Productivity",
                pro_promo_button: "Upgrade to PRO",
                dashboard_welcome_title: "Welcome to the Seller Panel!",
                dashboard_welcome_subtitle: "You can quickly access tools here to speed up your workflow.",
                dashboard_ai_desc: "Create product content in seconds with artificial intelligence.",
                dashboard_photo_desc: "Easily edit your product photos and add watermarks.",
                dashboard_pricing_desc: "Calculate the correct selling price by entering your costs.",
                dashboard_connections_desc: "Connect your stores on marketplaces like Etsy.",
                analyzer_title: "Store Analyzer",
                analyzer_subtitle: "Enter your store URL, and AI will analyze your strengths and weaknesses.",
                analyzer_placeholder: "https://www.etsy.com/shop/yourshop...",
                analyzer_button: "Analyze Store",
                analyzer_loading: "AI is reviewing your store...",
                analyzer_report_title: "Analysis Report",
                analyzer_overall: "Overall Assessment",
                analyzer_seo: "SEO and Keywords",
                analyzer_visuals: "Visual Analysis",
                analyzer_recommendations: "Actionable Recommendations",
                analyzer_save_report: "Save Analysis",
                analyzer_copy_report: "Copy Report",
                analyzer_saved_analyses: "Saved Analyses",
                analyzer_no_saved_analyses: "No saved analyses yet.",
                button_view: "View",
                button_share: "Share",
                listing_manager_title: "Listing Manager",
                listing_manager_subtitle: "Gather your product information here and upload it to your store.",
                listing_manager_select_content: "Select Saved Content",
                listing_manager_no_content_selected: "No content selected",
                listing_manager_price: "Price ($)",
                listing_manager_stock: "Stock Quantity",
                listing_manager_images: "Product Images",
                listing_manager_upload_to: "Upload to Store",
                listing_manager_upload_button: "Upload",
                listing_manager_uploading: "Uploading...",
                listing_manager_uploaded: "Uploaded Successfully!",
                ai_title: "AI-Powered Content Generator",
                ai_subtitle: "Enter keywords about your product, and we'll generate titles, descriptions, and tags for you.",
                ai_keywords_label: "Keywords",
                ai_keywords_placeholder_desc: "e.g., handmade, silver necklace, clover design, gift for her",
                ai_keywords_placeholder_input: "Enter words describing your product, separated by commas...",
                ai_button_generate: "Generate Content",
                ai_loader_text: "AI is writing for you...",
                ai_translating_text: "Translating...",
                ai_generated_title_label: "Title",
                ai_generated_desc_label: "Description",
                ai_generated_tags_label: "Tags",
                ai_title_not_found: "Title not found",
                ai_description_not_found: "Description not found",
                ai_tags_not_found: "Tags not found",
                ai_button_save: "Save This Content",
                ai_button_translate: "Translate to English",
                ai_saved_content_title: "Saved Content",
                ai_no_saved_content: "No saved content yet.",
                ai_error_keywords_missing: "Please enter at least one keyword to generate content.",
                button_save: "Save",
                button_copy: "Copy",
                button_copied: "Copied!",
                button_delete: "Delete",
                button_error: "Error",
                photo_editor_title: "Photo Editor",
                photo_editor_subtitle: "Upload, edit, and download your product photos.",
                photo_editor_upload_btn: "Upload Photo",
                photo_editor_brightness: "Brightness",
                photo_editor_contrast: "Contrast",
                photo_editor_saturation: "Saturation",
                photo_editor_watermark: "Watermark Text",
                photo_editor_watermark_placeholder: "Your Store Name",
                photo_editor_apply_watermark: "Apply Watermark",
                photo_editor_reset: "Reset",
                photo_editor_download: "Download",
                photo_editor_placeholder: "Upload a photo to start editing.",
                pricing_title: "Smart Price Calculator",
                pricing_subtitle: "Enter your costs and instantly calculate your profitable and competitive selling price.",
                pricing_cost: "Product Cost ($)",
                pricing_margin: "Desired Profit Margin (%)",
                pricing_shipping: "Shipping Fee ($)",
                pricing_fee: "Platform Commission (%)",
                pricing_button_calculate: "Calculate",
                pricing_result_title: "Recommended Selling Price:",
                pricing_result_profit_text: "Your net profit at this price will be:",
                connections_title: "Store Connections",
                connections_subtitle: "Start managing your stores on the platforms you sell on by connecting them here.",
                connections_etsy_desc: "A marketplace for handmade and vintage items.",
                connections_shopify_desc: "Create and manage your own e-commerce site.",
                connections_amazon_desc: "Amazon's dedicated section for handmade products.",
                button_connect: "Connect",
                button_continue: "Continue",
                button_connected: "Connected",
                button_soon: "Coming Soon",
                shopify_modal_url_title: "Enter Your Shopify Store URL",
                shopify_modal_url_subtitle: "Enter your '.myshopify.com' address to connect.",
                shopify_modal_perm1: "Read and write your products",
                delete_modal_title: "Are you sure?",
                delete_modal_subtitle: "This content will be permanently deleted. This action cannot be undone.",
                button_cancel: "Cancel",
                button_confirm_delete: "Yes, Delete",
                lang_name: "English",
                ai_prompt: `Act as an e-commerce copywriter. Using the keywords below, create SEO-friendly, sales-oriented, and creative product content. Keywords: "{keywords}"\n\nYour output must be in the following format:\nTitle: [Generated Title]\nDescription: [Generated Description]\nTags: [Generated Tags]`,
                ai_translate_prompt: `Translate the following e-commerce content into professional and fluent English. Maintain the marketing tone. Your output must be in the following format:\nTitle: [Translated Title]\nDescription: [Translated Description]\nTags: [Translated Tags]\n\n---CONTENT---\nTitle: {title}\nDescription: {description}\nTags: {tags}`,
                ai_analyzer_prompt: `You are an expert e-commerce consultant. Your task is to analyze the online store at the given URL and provide the seller with actionable recommendations to improve their store. Present your analysis in Markdown format under these headings:\n\n### Overall Assessment\n(A brief summary of the store's first impression, brand identity, trustworthiness, and overall professionalism.)\n\n### SEO and Keywords\n(Evaluate how well the product titles, descriptions, and tags (if any) are optimized for search engines. Note strengths and weaknesses.)\n\n### Visual Analysis\n(Analyze the quality, consistency, lighting, and customer appeal of the product photos.)\n\n### Actionable Recommendations\n(Based on the analysis above, list 3-5 concrete, prioritized, and actionable steps the seller can take to increase sales.)\n\nStore to analyze: `,
                button_close: "Close",
                error_modal_title: "An Error Occurred",
                api_error_generic: "Could not connect to the API. Please check your internet connection, API key, and try again.",
                upload_error_generic: "Upload failed. Please check your internet connection and try again.",
                upload_error_simulation: "Upload simulation failed. This feature requires a real backend connection. This is a frontend prototype.",
            },
        };
        
        // --- SCRIPT START ---
        document.addEventListener('DOMContentLoaded', () => {
            // ... (Tüm script içeriği buraya gelecek)
            let currentLang = localStorage.getItem('language') || 'tr';

            function setLanguage(lang) {
                currentLang = lang;
                localStorage.setItem('language', lang);
                document.documentElement.lang = lang;
                document.querySelectorAll('[data-translate-key]').forEach(el => {
                    const key = el.getAttribute('data-translate-key');
                    if (translations[lang] && translations[lang][key]) {
                        el.textContent = translations[lang][key];
                    }
                });
                 // Dil seçiciyi güncelle
                const langSelect = document.getElementById('language-select');
                if(langSelect) langSelect.value = lang;
            }

            // --- MOBİL MENÜ KONTROLÜ ---
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            const menuToggle = document.getElementById('menu-toggle');

            menuToggle.addEventListener('click', () => {
                sidebar.classList.toggle('-translate-x-full');
                overlay.classList.toggle('hidden');
            });

            overlay.addEventListener('click', () => {
                sidebar.classList.add('-translate-x-full');
                overlay.classList.add('hidden');
            });

            // --- MODAL FONKSİYONLARI ---
            const deleteModal = document.getElementById('delete-confirm-modal');
            const apiKeyModal = document.getElementById('api-key-modal');
            const errorModal = document.getElementById('error-modal');
            let itemToDeleteId = null;
            let itemTypeToDelete = null;

            function showDeleteConfirmModal(id, type) { 
                itemToDeleteId = id; 
                itemTypeToDelete = type;
                deleteModal.classList.remove('hidden'); 
            }
            function hideDeleteConfirmModal() { 
                itemToDeleteId = null; 
                itemTypeToDelete = null;
                deleteModal.classList.add('hidden'); 
            }
            function showApiKeyModal() { 
                document.getElementById('api-key-input').value = getApiKey();
                apiKeyModal.classList.remove('hidden'); 
            }
            function hideApiKeyModal() { apiKeyModal.classList.add('hidden'); }
            
            function showErrorModal(message) {
                const errorMessageEl = document.getElementById('error-modal-message');
                if (errorModal && errorMessageEl) {
                    errorMessageEl.textContent = message;
                    errorModal.classList.remove('hidden');
                }
            }

            const shopifyUrlModal = document.getElementById('shopify-url-modal');
            function showShopifyUrlModal() { shopifyUrlModal.classList.remove('hidden'); }
            function hideShopifyUrlModal() { shopifyUrlModal.classList.add('hidden'); }

            // --- API ANAHTARI YÖNETİMİ ---
            function saveApiKey() {
                const apiKey = document.getElementById('api-key-input').value;
                if(apiKey) {
                    localStorage.setItem('geminiApiKey', apiKey);
                    hideApiKeyModal();
                }
            }
            function getApiKey() {
                return localStorage.getItem('geminiApiKey') || '';
            }

             // --- SHOPIFY URL YÖNETİMİ ---
            function saveShopifyUrl() {
                const url = document.getElementById('shopify-url-input').value;
                if(url) {
                    localStorage.setItem('shopifyUrl', url);
                    hideShopifyUrlModal();
                    // Bağlantı durumunu güncelle
                    const shopifyConnectBtn = document.querySelector('[data-platform="shopify"]');
                    if(shopifyConnectBtn) {
                         shopifyConnectBtn.textContent = translations[currentLang].button_connected;
                         shopifyConnectBtn.classList.remove('btn-primary');
                         shopifyConnectBtn.classList.add('bg-green-600', 'cursor-not-allowed');
                         shopifyConnectBtn.disabled = true;
                    }
                }
            }
             function getShopifyUrl() {
                return localStorage.getItem('shopifyUrl') || '';
            }


            // --- SAYFA NAVİGASYONU ---
            const pages = {
                // ... Sayfa HTML içerikleri buraya gelecek
                 dashboard: `
                    <div class="card p-8">
                        <h2 class="text-3xl font-bold text-white" data-translate-key="dashboard_welcome_title">Satıcı Paneline Hoş Geldiniz!</h2>
                        <p class="text-gray-400 mt-2" data-translate-key="dashboard_welcome_subtitle">İş akışınızı hızlandıracak araçlara buradan hızlıca erişebilirsiniz.</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8">
                        <a class="card p-6 hover:bg-gray-800 transition-colors cursor-pointer" data-page="ai-generator">
                            <i class="fas fa-magic text-3xl text-indigo-400 mb-4"></i>
                            <h3 class="text-xl font-bold text-white" data-translate-key="nav_ai_generator">AI İçerik Üretici</h3>
                            <p class="text-gray-400" data-translate-key="dashboard_ai_desc">Yapay zeka ile saniyeler içinde ürün içeriği oluşturun.</p>
                        </a>
                        <a class="card p-6 hover:bg-gray-800 transition-colors cursor-pointer" data-page="photo-editor">
                            <i class="fas fa-image text-3xl text-teal-400 mb-4"></i>
                            <h3 class="text-xl font-bold text-white" data-translate-key="nav_photo_editor">Fotoğraf Editörü</h3>
                            <p class="text-gray-400" data-translate-key="dashboard_photo_desc">Ürün fotoğraflarınızı kolayca düzenleyin, filigran ekleyin.</p>
                        </a>
                        <a class="card p-6 hover:bg-gray-800 transition-colors cursor-pointer" data-page="pricing-calculator">
                            <i class="fas fa-calculator text-3xl text-amber-400 mb-4"></i>
                            <h3 class="text-xl font-bold text-white" data-translate-key="nav_pricing_calculator">Fiyat Hesaplayıcı</h3>
                            <p class="text-gray-400" data-translate-key="dashboard_pricing_desc">Maliyetlerinizi girerek doğru satış fiyatını hesaplayın.</p>
                        </a>
                         <a class="card p-6 hover:bg-gray-800 transition-colors cursor-pointer" data-page="platform-connections">
                            <i class="fas fa-plug text-3xl text-rose-400 mb-4"></i>
                            <h3 class="text-xl font-bold text-white" data-translate-key="nav_platform_connections">Mağaza Bağlantıları</h3>
                            <p class="text-gray-400" data-translate-key="dashboard_connections_desc">Etsy gibi pazar yerlerindeki mağazalarınızı bağlayın.</p>
                        </a>
                    </div>
                `,
                'store-analyzer': `
                     <div class="card p-8">
                        <h2 class="text-3xl font-bold text-white" data-translate-key="analyzer_title">Mağaza Analiz Aracı</h2>
                        <p class="text-gray-400 mt-2" data-translate-key="analyzer_subtitle">Mağaza URL'nizi girin, yapay zeka güçlü ve zayıf yönlerinizi analiz etsin.</p>
                        <div class="flex gap-4 mt-6">
                            <input id="store-url-input" type="text" class="form-input flex-grow" placeholder="https://www.etsy.com/shop/magazaniz...">
                            <button id="analyze-store-btn" class="btn-primary" data-translate-key="analyzer_button">Mağazayı Analiz Et</button>
                        </div>
                    </div>
                    <div id="analyzer-loader" class="hidden card p-8 text-center"><i class="fas fa-spinner fa-spin text-2xl mr-3"></i><span data-translate-key="analyzer_loading">AI mağazanızı inceliyor...</span></div>
                    <div id="analyzer-result-container" class="hidden space-y-8"></div>
                `,
                'listing-manager': `
                     <div class="card p-8">
                        <h2 class="text-3xl font-bold text-white" data-translate-key="listing_manager_title">Ürün Yöneticisi</h2>
                        <p class="text-gray-400 mt-2" data-translate-key="listing_manager_subtitle">Ürün bilgilerinizi burada toplayın ve mağazanıza yükleyin.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-6">
                            <!-- Sol Sütun: Bilgi Girişi -->
                            <div class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium mb-2" data-translate-key="listing_manager_select_content">Kaydedilmiş İçerik Seç</label>
                                    <select id="saved-content-select-for-manager" class="form-input">
                                        <option value="" data-translate-key="listing_manager_no_content_selected">İçerik seçilmedi</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2" data-translate-key="listing_manager_price">Fiyat ($)</label>
                                    <input type="number" id="listing-manager-price" class="form-input" placeholder="29.99">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2" data-translate-key="listing_manager_stock">Stok Adedi</label>
                                    <input type="number" id="listing-manager-stock" class="form-input" placeholder="10">
                                </div>
                            </div>
                            <!-- Sağ Sütun: Görsel Yükleme -->
                            <div>
                                 <label class="block text-sm font-medium mb-2" data-translate-key="listing_manager_images">Ürün Görselleri</label>
                                <div class="h-48 border-2 border-dashed border-gray-600 rounded-lg flex items-center justify-center text-gray-500">
                                    <span>Görselleri buraya sürükleyin veya tıklayın (Yakında)</span>
                                </div>
                            </div>
                        </div>

                        <div class="mt-8 border-t border-gray-700 pt-6">
                            <label class="block text-sm font-medium mb-2" data-translate-key="listing_manager_upload_to">Mağazaya Yükle</label>
                            <div class="flex items-center gap-4">
                                <select id="listing-manager-upload-platform" class="form-input w-1/3">
                                    <option value="shopify">Shopify</option>
                                    <option value="etsy">Etsy</option>
                                </select>
                                <button id="listing-manager-upload-btn" class="btn-primary w-full" data-translate-key="listing_manager_upload_button">Mağazaya Yükle</button>
                            </div>
                        </div>
                    </div>
                `,
                'ai-generator': `
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-1 space-y-8">
                             <div class="card p-8">
                                <h2 class="text-3xl font-bold text-white" data-translate-key="ai_title">AI İçerik Üretici</h2>
                                <p class="text-gray-400 mt-2 mb-6" data-translate-key="ai_subtitle">Ürününüzle ilgili anahtar kelimeleri girin, sizin için başlık, açıklama ve etiketler üretelim.</p>
                                <label for="ai-keywords-input" class="block text-sm font-medium mb-2" data-translate-key="ai_keywords_label">Anahtar Kelimeler</label>
                                <p class="text-xs text-gray-500 mb-2" data-translate-key="ai_keywords_placeholder_desc">ör: el yapımı, gümüş kolye, yonca tasarım, anneye hediye</p>
                                <textarea id="ai-keywords-input" rows="4" class="form-input" placeholder="Ürününüzü anlatan kelimeleri virgülle ayırarak girin..."></textarea>
                                <button id="ai-generate-btn" class="btn-primary w-full mt-4" data-translate-key="ai_button_generate">İçerik Oluştur</button>
                            </div>
                             <div class="card p-6">
                                <h3 class="text-xl font-bold text-white mb-4" data-translate-key="ai_saved_content_title">Kaydedilmiş İçerikler</h3>
                                <div id="saved-content-list" class="space-y-3 max-h-60 overflow-y-auto">
                                   <p class="text-gray-500 text-sm" data-translate-key="ai_no_saved_content">Henüz kaydedilmiş içerik yok.</p>
                                </div>
                            </div>
                        </div>
                        <div class="lg:col-span-2 card p-8">
                             <div id="ai-loader" class="hidden text-center py-12"><i class="fas fa-spinner fa-spin text-2xl mr-3"></i><span data-translate-key="ai_loader_text">AI sizin için yazıyor...</span></div>
                             <div id="ai-result-container" class="hidden space-y-6">
                                <div>
                                    <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-2" data-translate-key="ai_generated_title_label">Başlık</h3>
                                    <p id="generated-title" class="text-lg text-white font-semibold"></p>
                                </div>
                                <div>
                                    <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-2" data-translate-key="ai_generated_desc_label">Açıklama</h3>
                                    <p id="generated-description" class="text-gray-300 whitespace-pre-wrap"></p>
                                </div>
                                <div>
                                    <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-2" data-translate-key="ai_generated_tags_label">Etiketler</h3>
                                    <p id="generated-tags" class="text-indigo-300"></p>
                                </div>
                                <div class="flex gap-4 pt-4 border-t border-gray-700">
                                    <button id="save-ai-content-btn" class="btn-primary flex-grow" data-translate-key="ai_button_save">Bu İçeriği Kaydet</button>
                                    <button id="translate-ai-content-btn" class="btn-secondary" data-translate-key="ai_button_translate">İngilizce'ye Çevir</button>
                                </div>
                             </div>
                        </div>
                    </div>
                `,
                'photo-editor': `<div class="card p-8 text-center"><h2 data-translate-key="photo_editor_title">Fotoğraf Editörü</h2><p data-translate-key="button_soon">Bu özellik yakında aktif olacaktır.</p></div>`,
                'pricing-calculator': `<div class="card p-8 text-center"><h2 data-translate-key="pricing_title">Fiyat Hesaplayıcı</h2><p data-translate-key="button_soon">Bu özellik yakında aktif olacaktır.</p></div>`,
                'platform-connections': `
                    <div class="card p-8">
                        <h2 class="text-3xl font-bold text-white" data-translate-key="connections_title">Mağaza Bağlantıları</h2>
                        <p class="text-gray-400 mt-2" data-translate-key="connections_subtitle">Satış yaptığınız platformlardaki mağazalarınızı buraya bağlayarak yönetmeye başlayın.</p>
                        
                        <div class="space-y-6 mt-8">
                             <!-- Shopify -->
                            <div class="flex items-center justify-between p-4 bg-gray-800 rounded-lg">
                                <div class="flex items-center gap-4">
                                    <i class="fab fa-shopify text-4xl text-green-500"></i>
                                    <div>
                                        <h3 class="text-lg font-bold text-white">Shopify</h3>
                                        <p class="text-sm text-gray-400" data-translate-key="connections_shopify_desc">Kendi e-ticaret sitenizi oluşturun ve yönetin.</p>
                                    </div>
                                </div>
                                <button data-platform="shopify" class="btn-primary connect-btn" data-translate-key="button_connect">Bağlan</button>
                            </div>
                            <!-- Etsy -->
                            <div class="flex items-center justify-between p-4 bg-gray-800 rounded-lg">
                                <div class="flex items-center gap-4">
                                    <i class="fab fa-etsy text-4xl text-orange-500"></i>
                                    <div>
                                        <h3 class="text-lg font-bold text-white">Etsy</h3>
                                        <p class="text-sm text-gray-400" data-translate-key="connections_etsy_desc">El yapımı ve vintage ürünler için bir pazar yeri.</p>
                                    </div>
                                </div>
                                <button class="btn-secondary cursor-not-allowed" disabled data-translate-key="button_soon">Yakında</button>
                            </div>
                            <!-- Amazon Handmade -->
                            <div class="flex items-center justify-between p-4 bg-gray-800 rounded-lg">
                                <div class="flex items-center gap-4">
                                    <i class="fab fa-amazon text-4xl text-yellow-400"></i>
                                    <div>
                                        <h3 class="text-lg font-bold text-white">Amazon Handmade</h3>
                                        <p class="text-sm text-gray-400" data-translate-key="connections_amazon_desc">Amazon'un el yapımı ürünlere özel bölümü.</p>
                                    </div>
                                </div>
                               <button class="btn-secondary cursor-not-allowed" disabled data-translate-key="button_soon">Yakında</button>
                            </div>
                        </div>
                    </div>
                `,
            };

            const contentEl = document.getElementById('content');
            const navItems = document.querySelectorAll('.nav-item');

            function navigateTo(page) {
                if (pages[page]) {
                    contentEl.innerHTML = pages[page];
                    navItems.forEach(item => {
                        item.classList.toggle('active', item.getAttribute('data-page') === page);
                    });
                     // Yeni yüklenen içerik için event listenerları ekle
                    addPageEventListeners(page);
                    // Dili uygula
                    setLanguage(currentLang);
                }
            }

            document.body.addEventListener('click', (e) => {
                 const link = e.target.closest('a[data-page]');
                if (link) {
                    e.preventDefault();
                    navigateTo(link.getAttribute('data-page'));
                    // Mobil menüyü kapat
                     sidebar.classList.add('-translate-x-full');
                     overlay.classList.add('hidden');
                }
            });

            // --- EVENT LISTENER'LAR ---
            function addPageEventListeners(page) {
                 if (page === 'ai-generator') {
                    document.getElementById('ai-generate-btn')?.addEventListener('click', generateAIContent);
                    document.getElementById('save-ai-content-btn')?.addEventListener('click', saveCurrentAIContent);
                    document.getElementById('translate-ai-content-btn')?.addEventListener('click', translateCurrentAIContent);
                    loadSavedAIContent();
                } else if (page === 'platform-connections') {
                    document.querySelectorAll('.connect-btn').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            const platform = e.target.dataset.platform;
                            if (platform === 'shopify') {
                                showShopifyUrlModal();
                            }
                        });
                    });
                     // Shopify bağlantı durumunu kontrol et
                    if(getShopifyUrl()){
                        const shopifyConnectBtn = document.querySelector('[data-platform="shopify"]');
                        if(shopifyConnectBtn){
                            shopifyConnectBtn.textContent = translations[currentLang].button_connected;
                            shopifyConnectBtn.classList.remove('btn-primary');
                            shopifyConnectBtn.classList.add('bg-green-600', 'cursor-not-allowed');
                            shopifyConnectBtn.disabled = true;
                        }
                    }
                } else if (page === 'listing-manager') {
                     loadSavedContentIntoDropdown();
                     document.getElementById('listing-manager-upload-btn')?.addEventListener('click', handleListingUpload);
                } else if (page === 'store-analyzer') {
                    document.getElementById('analyze-store-btn')?.addEventListener('click', analyzeStore);
                }
            }
            
            // --- GENEL EVENT LISTENER'LAR ---
            document.getElementById('language-select')?.addEventListener('change', (e) => setLanguage(e.target.value));
            document.getElementById('api-key-link')?.addEventListener('click', (e) => { e.preventDefault(); showApiKeyModal(); });
            document.getElementById('confirm-delete-btn')?.addEventListener('click', () => {
                if(itemTypeToDelete === 'aiContent') deleteAIContent(itemToDeleteId);
                if(itemTypeToDelete === 'analysis') deleteAnalysis(itemToDeleteId);
                hideDeleteConfirmModal();
            });
            document.getElementById('cancel-delete-btn')?.addEventListener('click', hideDeleteConfirmModal);
            document.getElementById('save-api-key-btn')?.addEventListener('click', saveApiKey);
            document.getElementById('cancel-api-key-btn')?.addEventListener('click', hideApiKeyModal);
            document.getElementById('close-error-modal-btn')?.addEventListener('click', () => {
                errorModal.classList.add('hidden');
            });
            document.getElementById('continue-shopify-url-btn')?.addEventListener('click', saveShopifyUrl);
            document.getElementById('cancel-shopify-url-btn')?.addEventListener('click', hideShopifyUrlModal);

            // --- AYARLAR MENÜSÜ KONTROLÜ ---
            document.body.addEventListener('click', function(event) {
                const settingsBtn = document.getElementById('settings-btn');
                const settingsDropdown = document.getElementById('settings-dropdown');
                if (settingsBtn && settingsDropdown) {
                    if (settingsBtn.contains(event.target)) {
                        settingsDropdown.classList.toggle('hidden');
                    } else if (!settingsDropdown.contains(event.target)) {
                        settingsDropdown.classList.add('hidden');
                    }
                }
            });
            
            // --- API FONKSİYONLARI (GEMINI) ---
            async function callGemini(prompt) {
                const apiKey = getApiKey();
                if (!apiKey) {
                    showApiKeyModal();
                    return null;
                }
                const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                const payload = { contents: [{ parts: [{ text: prompt }] }] };

                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    
                    const result = await response.json();
                    const generatedText = result.candidates?.[0]?.content?.parts?.[0]?.text;

                    if (generatedText) {
                        return generatedText;
                    } else {
                       throw new Error("Invalid response from API.");
                    }
                } catch (error) {
                    console.error("Gemini API Error:", error);
                    const userFriendlyError = translations[currentLang]?.api_error_generic || "Could not connect to the API.";
                    showErrorModal(userFriendlyError);
                    return null;
                }
            }

            // --- AI İÇERİK ÜRETİCİ FONKSİYONLARI ---
            async function generateAIContent() {
                const keywords = document.getElementById('ai-keywords-input').value;
                if (!keywords) {
                    showErrorModal(translations[currentLang].ai_error_keywords_missing);
                    return;
                }
                const loader = document.getElementById('ai-loader');
                const resultContainer = document.getElementById('ai-result-container');
                const generateBtn = document.getElementById('ai-generate-btn');

                loader.classList.remove('hidden');
                resultContainer.classList.add('hidden');
                generateBtn.disabled = true;

                const prompt = (translations[currentLang].ai_prompt || "").replace('{keywords}', keywords);
                const generatedText = await callGemini(prompt);
                
                loader.classList.add('hidden');
                generateBtn.disabled = false;

                if (generatedText) {
                    const { title, description, tags } = parseAIResponse(generatedText);
                    document.getElementById('generated-title').textContent = title;
                    document.getElementById('generated-description').textContent = description;
                    document.getElementById('generated-tags').textContent = tags;
                    resultContainer.classList.remove('hidden');
                }
            }
            
            // --- ÜRÜN YÖNETİCİSİ - MAĞAZAYA YÜKLEME ---
            async function handleListingUpload() {
                const uploadBtn = document.getElementById('listing-manager-upload-btn');
                const platform = document.getElementById('listing-manager-upload-platform').value;

                if (platform === 'shopify' || platform === 'etsy') {
                    const shopifyUrl = getShopifyUrl();
                    if (platform === 'shopify' && !shopifyUrl) {
                        showShopifyUrlModal();
                        return;
                    }
                    
                    uploadBtn.disabled = true;
                    uploadBtn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> <span data-translate-key="listing_manager_uploading">${translations[currentLang].listing_manager_uploading}</span>`;

                    try {
                        // GERÇEK API ÇAĞRISI YERİNE SİMÜLASYON
                        // Bu bölüm, gerçek bir arka uç olmadan "Failed to fetch" hatasına neden oluyordu.
                        await new Promise((resolve, reject) => {
                            setTimeout(() => {
                                console.log(`Simulating failed upload to ${platform}`);
                                reject(new Error('Simulated backend error')); 
                            }, 2000);
                        });

                        // BAŞARILI YÜKLEME KODU (Simülasyon başarılı olursa çalışır)
                        uploadBtn.classList.remove('btn-primary');
                        uploadBtn.classList.add('bg-green-600');
                        uploadBtn.innerHTML = `<i class="fas fa-check-circle"></i> <span data-translate-key="listing_manager_uploaded">${translations[currentLang].listing_manager_uploaded}</span>`;

                    } catch (error) {
                        console.error('Yükleme simülasyonu hatası:', error);
                        const userFriendlyError = translations[currentLang]?.upload_error_simulation || "Upload failed.";
                        showErrorModal(userFriendlyError);
                        uploadBtn.classList.remove('btn-primary');
                        uploadBtn.classList.add('bg-red-600');
                        uploadBtn.innerHTML = `<i class="fas fa-times-circle"></i> <span data-translate-key="button_error">${translations[currentLang].button_error}</span>`;
                    } finally {
                         setTimeout(() => {
                            uploadBtn.disabled = false;
                            uploadBtn.classList.remove('bg-green-600', 'bg-red-600');
                            uploadBtn.innerHTML = `<span data-translate-key="listing_manager_upload_button">${translations[currentLang].listing_manager_upload_button}</span>`;
                         }, 3000);
                    }
                }
            }


            // Diğer tüm yardımcı fonksiyonlar (save, load, delete, parse, etc.) buraya gelecek...
            // ...

            // --- Başlangıç ---
            navigateTo('dashboard');
            setLanguage(currentLang);
        });
    </script>
</body>
</html>

